<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mock-Driven Testing å¯è§†åŒ–æ¼”ç¤º</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            color: #fff;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 40px;
            background: linear-gradient(45deg, #00ff88, #0088ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .demo-section {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .traditional, .mock-driven {
            padding: 20px;
            border-radius: 8px;
        }
        
        .traditional {
            background: #3a2a2a;
            border: 2px solid #ff4444;
        }
        
        .mock-driven {
            background: #2a3a2a;
            border: 2px solid #44ff44;
        }
        
        .progress-bar {
            width: 100%;
            height: 30px;
            background: #444;
            border-radius: 15px;
            overflow: hidden;
            margin: 10px 0;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff88, #0088ff);
            width: 0%;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        .api-call {
            background: #333;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            border-left: 4px solid #0088ff;
            font-family: monospace;
            transition: all 0.3s ease;
        }
        
        .api-call:hover {
            transform: translateX(10px);
            box-shadow: 0 4px 8px rgba(0,136,255,0.3);
        }
        
        .response {
            background: #1a1a1a;
            padding: 15px;
            margin-top: 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 14px;
            white-space: pre;
            overflow-x: auto;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        
        .stat-card {
            background: #333;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
        }
        
        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #00ff88;
        }
        
        .button {
            background: linear-gradient(45deg, #00ff88, #0088ff);
            border: none;
            color: white;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
        }
        
        .button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0,136,255,0.5);
        }
        
        .animate-in {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸš€ Mock-Driven Testing å¯è§†åŒ–æ¼”ç¤º</h1>
        
        <div class="demo-section">
            <h2>ä¼ ç»Ÿæµ‹è¯• vs Mock-Driven Testing</h2>
            
            <div class="comparison">
                <div class="traditional">
                    <h3>âŒ ä¼ ç»Ÿæµ‹è¯•æ–¹å¼</h3>
                    <p>å¯åŠ¨æ—¶é—´åˆ†æï¼š</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="db-progress">PostgreSQL: 0%</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="redis-progress">Redis: 0%</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="api-progress">API Server: 0%</div>
                    </div>
                    <p>æ€»å¯åŠ¨æ—¶é—´: <span id="traditional-time">0</span> ç§’</p>
                    <p>éœ€è¦èµ„æº: æ•°æ®åº“ + Redis + APIæœåŠ¡å™¨</p>
                </div>
                
                <div class="mock-driven">
                    <h3>âœ… Mock-Driven Testing</h3>
                    <p>å¯åŠ¨æ—¶é—´åˆ†æï¼š</p>
                    <div class="progress-bar">
                        <div class="progress-fill" id="mock-progress">åŠ è½½ Mocks: 0%</div>
                    </div>
                    <p>æ€»å¯åŠ¨æ—¶é—´: <span id="mock-time">0</span> ç§’</p>
                    <p>éœ€è¦èµ„æº: ä»… Mock æ–‡ä»¶</p>
                    <p style="margin-top: 40px;">âœ¨ é€Ÿåº¦æå‡: <span style="font-size: 2em; color: #00ff88;">30x</span></p>
                </div>
            </div>
        </div>
        
        <div class="demo-section">
            <h2>ğŸ¬ å®æ—¶ API è°ƒç”¨æ¼”ç¤º</h2>
            <button class="button" onclick="startApiDemo()">å¼€å§‹ API è°ƒç”¨æ¼”ç¤º</button>
            <div id="api-demo"></div>
        </div>
        
        <div class="demo-section">
            <h2>ğŸ“Š æ€§èƒ½ç»Ÿè®¡</h2>
            <div class="stats">
                <div class="stat-card">
                    <div class="stat-number">154</div>
                    <div>API ç«¯ç‚¹å·²æ¨¡æ‹Ÿ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">20-30x</div>
                    <div>é€Ÿåº¦æå‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">0</div>
                    <div>å¤–éƒ¨ä¾èµ–</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">100%</div>
                    <div>æµ‹è¯•è¦†ç›–ç‡</div>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // å¯åŠ¨è¿›åº¦åŠ¨ç”»
        function animateProgress(elementId, duration, finalTime) {
            const element = document.getElementById(elementId);
            const start = Date.now();
            
            const animate = () => {
                const elapsed = Date.now() - start;
                const progress = Math.min(elapsed / duration * 100, 100);
                element.style.width = progress + '%';
                element.textContent = element.textContent.split(':')[0] + ': ' + Math.floor(progress) + '%';
                
                if (progress < 100) {
                    requestAnimationFrame(animate);
                } else {
                    element.textContent = element.textContent.split(':')[0] + ': âœ“';
                }
            };
            
            animate();
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨å¼€å§‹æ¼”ç¤º
        window.onload = () => {
            // ä¼ ç»Ÿæ–¹å¼
            setTimeout(() => animateProgress('db-progress', 3000), 500);
            setTimeout(() => animateProgress('redis-progress', 2000), 3500);
            setTimeout(() => animateProgress('api-progress', 2500), 5500);
            
            // æ›´æ–°æ—¶é—´
            let traditionalTime = 0;
            const traditionalTimer = setInterval(() => {
                traditionalTime += 0.1;
                document.getElementById('traditional-time').textContent = traditionalTime.toFixed(1);
                if (traditionalTime >= 8) clearInterval(traditionalTimer);
            }, 100);
            
            // Mock æ–¹å¼
            setTimeout(() => {
                animateProgress('mock-progress', 300);
                let mockTime = 0;
                const mockTimer = setInterval(() => {
                    mockTime += 0.01;
                    document.getElementById('mock-time').textContent = mockTime.toFixed(2);
                    if (mockTime >= 0.3) clearInterval(mockTimer);
                }, 10);
            }, 8500);
        };
        
        // API è°ƒç”¨æ¼”ç¤º
        const apiCalls = [
            {
                method: 'GET',
                endpoint: '/api/cart',
                response: {
                    success: true,
                    data: {
                        items: [
                            { name: 'iPhone 13', price: 3999, qty: 1 },
                            { name: 'AirPods Pro', price: 999, qty: 2 }
                        ],
                        total: 5997
                    }
                },
                time: '12ms'
            },
            {
                method: 'GET',
                endpoint: '/api/user/profile',
                response: {
                    success: true,
                    data: {
                        name: 'Test User',
                        email: 'test@storehub.com',
                        member: 'Gold'
                    }
                },
                time: '8ms'
            },
            {
                method: 'POST',
                endpoint: '/api/order/checkout',
                response: {
                    success: true,
                    data: {
                        orderId: 'ORD-' + Date.now(),
                        status: 'confirmed'
                    }
                },
                time: '15ms'
            },
            {
                method: 'GET',
                endpoint: '/api/payment/fail',
                response: {
                    success: false,
                    error: 'Payment declined',
                    code: 'INSUFFICIENT_FUNDS'
                },
                time: '5ms'
            }
        ];
        
        async function startApiDemo() {
            const demoContainer = document.getElementById('api-demo');
            demoContainer.innerHTML = '';
            
            for (const call of apiCalls) {
                const callElement = document.createElement('div');
                callElement.className = 'api-call animate-in';
                callElement.innerHTML = `
                    <strong>${call.method}</strong> ${call.endpoint}
                    <span style="float: right; color: #00ff88;">âš¡ ${call.time}</span>
                    <div class="response">${JSON.stringify(call.response, null, 2)}</div>
                `;
                demoContainer.appendChild(callElement);
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
        }
    </script>
</body>
</html>